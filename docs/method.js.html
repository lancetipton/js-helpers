<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>method.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-array.html">array</a><ul class='methods'><li data-type='method'><a href="module-array.html#.cloneArr">cloneArr</a></li><li data-type='method'><a href="module-array.html#.flatMap">flatMap</a></li><li data-type='method'><a href="module-array.html#.isArr">isArr</a></li><li data-type='method'><a href="module-array.html#.omitRange">omitRange</a></li><li data-type='method'><a href="module-array.html#.randomArr">randomArr</a></li><li data-type='method'><a href="module-array.html#.randomizeArr">randomizeArr</a></li><li data-type='method'><a href="module-array.html#.uniqArr">uniqArr</a></li></ul></li><li><a href="module-boolean.html">boolean</a><ul class='methods'><li data-type='method'><a href="module-boolean.html#.convertToStrBool">convertToStrBool</a></li><li data-type='method'><a href="module-boolean.html#.isBool">isBool</a></li><li data-type='method'><a href="module-boolean.html#.isStrBool">isStrBool</a></li><li data-type='method'><a href="module-boolean.html#.softFalsy">softFalsy</a></li><li data-type='method'><a href="module-boolean.html#.toBool">toBool</a></li></ul></li><li><a href="module-collection.html">collection</a><ul class='methods'><li data-type='method'><a href="module-collection.html#.deepClone">deepClone</a></li><li data-type='method'><a href="module-collection.html#.get">get</a></li><li data-type='method'><a href="module-collection.html#.isColl">isColl</a></li><li data-type='method'><a href="module-collection.html#.isEmptyColl">isEmptyColl</a></li><li data-type='method'><a href="module-collection.html#.mapColl">mapColl</a></li><li data-type='method'><a href="module-collection.html#.reduceColl">reduceColl</a></li><li data-type='method'><a href="module-collection.html#.repeat">repeat</a></li><li data-type='method'><a href="module-collection.html#.set">set</a></li><li data-type='method'><a href="module-collection.html#.shallowEqual">shallowEqual</a></li><li data-type='method'><a href="module-collection.html#.unset">unset</a></li><li data-type='method'><a href="module-collection.html#~cloneObjWithPrototypeAndProperties">cloneObjWithPrototypeAndProperties</a></li></ul></li><li><a href="module-functions.html">functions</a><ul class='methods'><li data-type='method'><a href="module-functions.html#.applyToFunc">applyToFunc</a></li><li data-type='method'><a href="module-functions.html#.checkCall">checkCall</a></li><li data-type='method'><a href="module-functions.html#.cloneFunc">cloneFunc</a></li><li data-type='method'><a href="module-functions.html#.debounce">debounce</a></li><li data-type='method'><a href="module-functions.html#.doIt">doIt</a></li><li data-type='method'><a href="module-functions.html#.eitherFunc">eitherFunc</a></li><li data-type='method'><a href="module-functions.html#.isFunc">isFunc</a></li><li data-type='method'><a href="module-functions.html#.limbo">limbo</a></li><li data-type='method'><a href="module-functions.html#.memorize">memorize</a></li><li data-type='method'><a href="module-functions.html#.pipeline">pipeline</a></li><li data-type='method'><a href="module-functions.html#.throttle">throttle</a></li><li data-type='method'><a href="module-functions.html#.throttleLast">throttleLast</a></li><li data-type='method'><a href="module-functions.html#.uuid">uuid</a></li><li data-type='method'><a href="module-functions.html#~Patternmatchingfunction.Iteratesthroughtheentries,whichhavetheform%255Bcheckvalueorpredicate,returnvalue%255D,andwhenitencountersanentrywhosecheckvaluematchesthematchArg(orthepredicatereturnstruewhenpassedthematchArg),itreturnsthereturnvalueofthatentry.Forthedefaultcase:use%255Bmatch.default,%253Cyourdefaultvalue%253E%255D">Pattern matching function. Iterates through the entries,
which have the form [ check value or predicate, return value ], and
when it encounters an entry whose check value matches the matchArg
(or the predicate returns true when passed the matchArg), it returns
the return value of that entry.

For the default case: use [ match.default, <your default value> ]</a></li></ul></li><li><a href="module-Helpers.html">Helpers</a><ul class='methods'><li data-type='method'><a href="module-Helpers.html#.either">either</a></li><li data-type='method'><a href="module-Helpers.html#.isEmpty">isEmpty</a></li><li data-type='method'><a href="module-Helpers.html#.isSame">isSame</a></li><li data-type='method'><a href="module-Helpers.html#.isValidDate">isValidDate</a></li><li data-type='method'><a href="module-Helpers.html#.strToType">strToType</a></li><li data-type='method'><a href="module-Helpers.html#.typeOf">typeOf</a></li></ul></li><li><a href="module-log.html">log</a><ul class='methods'><li data-type='method'><a href="module-log.html#.logData">logData</a></li><li data-type='method'><a href="module-log.html#.resetLogs">resetLogs</a></li><li data-type='method'><a href="module-log.html#.setLogs">setLogs</a></li></ul></li><li><a href="module-number.html">number</a><ul class='methods'><li data-type='method'><a href="module-number.html#.equalsNaN">equalsNaN</a></li><li data-type='method'><a href="module-number.html#.getNums">getNums</a></li><li data-type='method'><a href="module-number.html#.isFloat">isFloat</a></li><li data-type='method'><a href="module-number.html#.isInt">isInt</a></li><li data-type='method'><a href="module-number.html#.isNonNegative">isNonNegative</a></li><li data-type='method'><a href="module-number.html#.isNum">isNum</a></li><li data-type='method'><a href="module-number.html#.nth">nth</a></li><li data-type='method'><a href="module-number.html#.toFloat">toFloat</a></li><li data-type='method'><a href="module-number.html#.toInt">toInt</a></li><li data-type='method'><a href="module-number.html#.toNum">toNum</a></li></ul></li><li><a href="module-object.html">object</a><ul class='methods'><li data-type='method'><a href="module-object.html#.applyToCloneOf">applyToCloneOf</a></li><li data-type='method'><a href="module-object.html#.clearObj">clearObj</a></li><li data-type='method'><a href="module-object.html#.cloneJson">cloneJson</a></li><li data-type='method'><a href="module-object.html#.deepFreeze">deepFreeze</a></li><li data-type='method'><a href="module-object.html#.deepMerge">deepMerge</a></li><li data-type='method'><a href="module-object.html#.eitherObj">eitherObj</a></li><li data-type='method'><a href="module-object.html#.everyEntry">everyEntry</a></li><li data-type='method'><a href="module-object.html#.filterObj">filterObj</a></li><li data-type='method'><a href="module-object.html#.hasOwn">hasOwn</a></li><li data-type='method'><a href="module-object.html#.isObj">isObj</a></li><li data-type='method'><a href="module-object.html#.jsonEqual">jsonEqual</a></li><li data-type='method'><a href="module-object.html#.keyMap">keyMap</a></li><li data-type='method'><a href="module-object.html#.mapKeys">mapKeys</a></li><li data-type='method'><a href="module-object.html#.mapObj">mapObj</a></li><li data-type='method'><a href="module-object.html#.omitKeys">omitKeys</a></li><li data-type='method'><a href="module-object.html#.pickKeys">pickKeys</a></li><li data-type='method'><a href="module-object.html#.reduceObj">reduceObj</a></li><li data-type='method'><a href="module-object.html#.sanitizeCopy">sanitizeCopy</a></li><li data-type='method'><a href="module-object.html#.someEntry">someEntry</a></li><li data-type='method'><a href="module-object.html#.toObj">toObj</a></li><li data-type='method'><a href="module-object.html#.trimStringFields">trimStringFields</a></li></ul></li><li><a href="module-promise.html">promise</a><ul class='methods'><li data-type='method'><a href="module-promise.html#.promisifyAll">promisifyAll</a></li><li data-type='method'><a href="module-promise.html#.wait">wait</a></li></ul></li><li><a href="module-string.html">string</a><ul class='methods'><li data-type='method'><a href="module-string.html#.buildPath">buildPath</a></li><li data-type='method'><a href="module-string.html#.camelCase">camelCase</a></li><li data-type='method'><a href="module-string.html#.capitalize">capitalize</a></li><li data-type='method'><a href="module-string.html#.cleanStr">cleanStr</a></li><li data-type='method'><a href="module-string.html#.containsStr">containsStr</a></li><li data-type='method'><a href="module-string.html#.delimitString">delimitString</a></li><li data-type='method'><a href="module-string.html#.eitherStr">eitherStr</a></li><li data-type='method'><a href="module-string.html#.isEmail">isEmail</a></li><li data-type='method'><a href="module-string.html#.isLowerCase">isLowerCase</a></li><li data-type='method'><a href="module-string.html#.isPhone">isPhone</a></li><li data-type='method'><a href="module-string.html#.isStr">isStr</a></li><li data-type='method'><a href="module-string.html#.isUpperCase">isUpperCase</a></li><li data-type='method'><a href="module-string.html#.isUrl">isUrl</a></li><li data-type='method'><a href="module-string.html#.isUuid">isUuid</a></li><li data-type='method'><a href="module-string.html#.mapString">mapString</a></li><li data-type='method'><a href="module-string.html#.parseJSON">parseJSON</a></li><li data-type='method'><a href="module-string.html#.plural">plural</a></li><li data-type='method'><a href="module-string.html#.removeDot">removeDot</a></li><li data-type='method'><a href="module-string.html#.sanitize">sanitize</a></li><li data-type='method'><a href="module-string.html#.singular">singular</a></li><li data-type='method'><a href="module-string.html#.snakeCase">snakeCase</a></li><li data-type='method'><a href="module-string.html#.styleCase">styleCase</a></li><li data-type='method'><a href="module-string.html#.toStr">toStr</a></li><li data-type='method'><a href="module-string.html#.trainCase">trainCase</a></li><li data-type='method'><a href="module-string.html#.wordCaps">wordCaps</a></li></ul></li><li><a href="module-url.html">url</a></li><li><a href="module-validation.html">validation</a><ul class='methods'><li data-type='method'><a href="module-validation.html#~handleFailure">handleFailure</a></li><li data-type='method'><a href="module-validation.html#~Ifyouneedtoconfigurevalidationpropertiesglobally,youcandosohere.Theseareoverriddenbythevalidateoptionsarguments,ifoneisdefinedinvalidate().">If you need to configure validation properties globally, you can do so here. These are overridden by the validate options arguments,
if one is defined in validate().</a></li><li data-type='method'><a href="module-validation.html#~Resetstheglobalvalidationoptionstotheirdefaults">Resets the global validation options to their defaults</a></li><li data-type='method'><a href="module-validation.html#~validateArgument">validateArgument</a></li><li data-type='method'><a href="module-validation.html#~Validateseachkey-valueentryinargObjusingthevalidatorfunctionsinvalidatorswithmatchingkeys.Foranyfailures,validatewillconsole.errorthereason.">Validates each key-value entry in argObj using the validator functions in validators with matching keys. 
 For any failures, validate will console.error the reason.</a></li><li data-type='method'><a href="module-validation.html#~validationReducer">validationReducer</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">method.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module functions */

'use strict'

import { isArr } from './array'
import { isNum } from './number'
import { hasOwn } from './object'
import { typeOf } from './ext'

/**
 * Function for making repeated nested function calls (the 'pipeline') succinct. Passes "item" into
 * &lt;br> the first function (as its first argument), takes its result and passes that into the next function, and repeats.
 * &lt;br> Continues until no functions remain, at which point it returns the value returned by the last function.
 * &lt;br>  - you can also pass in an array in place of a function to specify a function to be called with some arguments. E.g.: [foo, 2, 3] would return foo(item, 2, 3)
 * @example: pipeline(1, addFour, subtract3, (x) => x * x) // would return 4
 * @function
 * @param {* | Function} item - the starting input. If it is a function, it will be executed immediately and the result will be piped into the remaining functions.
 * @param {...Function} functions 
 * @returns the final result of calling the pipeline of functions , starting with item as input
 */
export const pipeline = (item, ...functions) => {
  return functions.reduce(
    (result, fn) => applyToFunc(result, fn),
    item
  )
}

/**
 * Helper for pipeline. Passes 'item' into 'expression' as its first argument.
 * &lt;br> Expression may be a function or an array of form: [function, ...remainingArguments].
 * @function
 * @param {*} item 
 * @param {*} expression 
 */
export const applyToFunc = (item, expression) => {
  if (isArr(expression)) {
    const [func, ...args] = expression
    return func(item, ...args)
  }
  else if (isFunc(expression)) {
    return expression(item) 
  }
  else {
    console.error(`Pipeline expected either a function or an array (for function expressions). Found ${typeof expression}`)
    return item
  }
}

/**
 * Check if the passed in method is a function, and calls it
 * @example
 * checkCall((param1) => { return param1 }, 'foo')
 * // Returns 'foo'
 * @function
 * @param {function} method - function to call
 * @param {Object} params - params to pass to the method on call
 * @return {*} - whatever the passed in method returns
 */
export const checkCall = (method, ...params) =>  isFunc(method) &amp;&amp; method(...params) || undefined

/**
 * Returns the first param if it's a function.
 * &lt;br> If first param is not a function, returns second param.
 * @example
 * eitherFunc(() => {}, 'bar')
 * // Returns first param because it's a function.
 * @example
 * eitherFunc('foo', 'bar')
 * // Returns 'bar'
 * @function
 * @param {function} func1 - return if is func
 * @param {function} func2 - use if first is not an object
 * @returns {function}
 */
export const eitherFunc = (func1, func2) => (
  isFunc(func1) &amp;&amp; func1 || func2
)

/**
 * Limits the amount of calls to a function over time
 * @example
 * debounce(myFunction)
 * // Calls myFunction after the default 250 ms
 * @example
 * debounce(myFunction, 500)
 * // Calls myFunction after 500 ms
 * @example
 * debounce(myFunction, 500, true)
 * // Calls myFunction immediately
 * @function
 * @param {function} func - function to call
 * @param {number} wait - how long to wait between function calls
 * @param {boolean} immediate - should call immediately
 * @return { void }
 */
export const debounce = (func, wait = 250, immediate = false) => {
  let timeout
  return (...args) => {
    if (!isFunc(func)) return null

    const context = this
    const later = () => {
      timeout = null
      !immediate &amp;&amp; func.apply(context, args)
    }
    const callNow = immediate &amp;&amp; !timeout
    clearTimeout(timeout)
    timeout = setTimeout(later, wait)
    if (callNow)
      return isFunc(func) &amp;&amp; func.apply(context, args)
  }
}

/**
 * Execute a method n times.
 * &lt;br> Callback params - does not include number || callback method
 * @function
  * @example
 * doIt(10, window, [], (index, arr) => { arr.push(index) }) === [ 0,1,2 ... 8,9 ]
 * @param {number} args.0 - number of times to call the callback
 * @param {parent} args.1 - value to bind the method call to ( this )
 * @param {function} last arg of args array - method to call
 * @return { void }
 */
export const doIt = (...args) => {
  const params = args.slice()
  const num = params.shift()
  const bindTo = params.shift()
  const cb = params.pop()
  if(!isNum(num) || !isFunc(cb)) return []
  
  const doItAmount = new Array(num)
  const responses = []
  for(let i = 0; i &lt; doItAmount.length; i++){
    const data = cb.call(bindTo, i, ...params)
    if (data === false) break
    responses.push(data)
  }

  return responses
}

/**
 * Check if the passed in item is a function.
 * @example
 * isFunc(() => {})
 * // Returns true
 * @example
 * isFunc('bar')
 * // Returns false
 * @function
 * @param {*} test
 * @return {boolean} is a function
 */
export const isFunc = func => typeof func === 'function'

/**
 * Creates a method to memorize passed in methods output
 * @example
 * memorize(myFunction, cacheKeyFunction)
  * @example
 * memorize(myFunction, cacheKeyFunction, 100)
 * @function
 * @param {function} func - method to memorize output of
 * @param {function} getCacheKey - gets the key to save cached output
 *
 * @return {function} memorized function with cache
 */
export const memorize = (func, getCacheKey, limit=1) => {
    if (!isFunc(func) || (getCacheKey &amp;&amp; !isFunc(getCacheKey)))
      return console.error('Error: Expected a function', func, getCacheKey)

    let memorized = function() {
      const cache = memorized.cache
      const key = getCacheKey ? getCacheKey.apply(this,  arguments) : arguments[0]

      if (hasOwn(cache, key)) return cache[key]

      const result = func.apply(this, arguments)

      isNum(limit) &amp;&amp; Object.keys(cache).length &lt; limit
        ? (cache[key] = result)
        : (memorized.cache = { [key]: result })

      return result
    }

    memorized.cache = {}
    memorized.destroy = () => {
      getCacheKey = undefined
      memorized.cache = undefined
      memorized.destroy = undefined
      memorized = undefined
    }

    return memorized
}

/**
 * Throttle function calls to only execute once over a wait period
 * @example
 * throttle(() => console.log('throttled'), 50)()
 * @function
 * @param {*} func - method to call after wait
 * @param {number} [wait=100] time to wait between calls
 * @return {function} throttled function
 */
export const throttle = (func, wait = 100) => {
  let waiting = false
  return (...args) => {
    if (waiting) return
    waiting = true
    func.apply(this, args)
    return setTimeout(() => {
      waiting = false
    }, wait)
  }
}

/**
 * Ensures the last call to the throttled function get called.
 * &lt;br> Will wait the allotted time, before calling the last call to it.
 * &lt;br> The final call will not execute until no more calls are made,
 * &lt;br> Accepts a callback to call each time the throttle called,
 * @example
 * throttleLast(() => {}, () => {})()
 * // throttle function
 * @function
 * @param {function} func - method to call after wait
 * @param {function} cb - method to call after throttle function is called
 * @param {number} [wait=100] time to wait until executing func param
 * @return {function} throttled function
 */
export const throttleLast = (func, cb, wait = 100) => {
  let throttleTimeout
  return (...args) => {
    // If the throttle already exists clear it, and create it again
    if (throttleTimeout) clearTimeout(throttleTimeout)
    // Store a reference to the timeout
    // Will wait the allotted time until calling the final call to it
    throttleTimeout = setTimeout(() => {
      func.apply(this, args)
      clearTimeout(throttleTimeout)
    }, wait)
    typeof cb === 'function' &amp;&amp; cb()
  }
}

/**
 * Adds catch to a promise for better error handling of await functions
 * &lt;br> Removes the need for wrapping await in a try / catch
 * @example
 * const [ err, data ] = await limbo(promiseFunction())
 * // returns an array
 * // * err will be undefined if no error was thrown
 * // * data will be the response from the promiseFunction
 * @function
 * @param {Promise} promise - Promise to be resolved
 * @return {Array} - Slot 1 => error, Slot 2 => response from promise
 */
export const limbo = promise => {
  return !promise || !isFunc(promise.then)
    ? [ new Error(`A promise or thenable is required as the first argument!`), null]
    : promise
      .then(data => [null, data])
      .catch(err => [err, undefined])
}

/**
 * Creates a uuid, unique up to around 20 million iterations.
 * @example
 * uuid()
 * // New uuid as a string
 * @function
 * @param {number} start of the uuid
 * @return {string} - build uuid
 */
export const uuid = a => a ? (a ^ Math.random() * 16 >> a / 4).toString(16) : ([ 1e7 ] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g,uuid)

/**
 * Clones a function using the Function constructor and calling toString on the passed in function
 * @example
 * const func = () => { console.log('test') }
 * const clone = cloneFunc(func)
 * // clone !== func
 * @function
 * @param {function} func - function to clone
 *
 * @returns {Object} cloned function
 */
export const cloneFunc = func => {
  const funcRef = func
  const funcWrap = (...args) => new funcRef(...args)

  const funcClone = (...args) => {
    return func instanceof funcClone
      ? funcWrap.apply(null, args)
      : funcRef.apply(func, args)
  }

  for(let key in func )
    func.hasOwnProperty(key) &amp;&amp; (funcClone[key] = func[key])
  
  Object.defineProperty(funcClone, 'name', { value: func.name, configurable: true })
  funcClone.toString = () => func.toString()

  return funcClone
}

/**
* @function
* Pattern matching function. Iterates through the entries,
* which have the form [ check value or predicate, return value ], and
* when it encounters an entry whose check value matches the matchArg
* (or the predicate returns true when passed the matchArg), it returns
* the return value of that entry.
*
* For the default case: use [ match.default, &lt;your default value> ]
*
* @param {*} matchArg 
* @param {Array} entries - the cases
* @param {*} fallback (optional) fallback default
* @returns the return value of the first entry with a matching check value, else null
*
* @example 
* const value = 1
* match(value,
*  [ 1, "hello" ],
*  [ x => x > 2, "greater" ] 
*  [ match.default, "defaulted"]
* ) 
* => returns "hello"
* 
* @example 
* const value = 3
* match(value,
*  [ 1, "hello" ],
*  [ x => x > 2, "greater" ] 
* ) 
* => returns "greater"
*
* @example 
* // react reducer:
*function todoReducer(state, action) {
*   const reducer = match(action.type,
*       [ 'ADD-TODO', addTodo ],
*       [ 'REMOVE-TODO', removeTodo ],
*       [ 'UPDATE-TODO', updateTodo ],
*       [ match.default, state ]
*   )
*
*   return reducer(state, action)
*}
*/
export const match = (matchArg, ...args) => {
  if (!args.length) return null

  // check all cases and return a value if a match is found
  for (let entry of args) {
    if (!isArr(entry)) {
      console.error(`Matching case must be an entry (a 2-element array). Found: ${typeOf(entry)}`, entry)
      break
    }
    const [ caseValueOrPredicate, valueOnMatch ] = entry
    if (isFunc(caseValueOrPredicate) &amp;&amp; caseValueOrPredicate(matchArg)) return valueOnMatch
    if (caseValueOrPredicate === matchArg) return valueOnMatch
  }

  return null
}

/**
 * The default case function you can use with match. Just returns true so the case value can be used.
 * @function
 * @example
 * match(foo
 *    [ 100, 'a' ],
 *    [ 200, 'b' ],
 *    [ match.default, 'default value' ]
 * )
 */
match.default = () => true

</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Tue Feb 04 2020 14:01:42 GMT-0700 (Mountain Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>

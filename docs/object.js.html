<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>object.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-array.html">array</a><ul class='methods'><li data-type='method'><a href="module-array.html#.cloneArr">cloneArr</a></li><li data-type='method'><a href="module-array.html#.isArr">isArr</a></li><li data-type='method'><a href="module-array.html#.randomArray">randomArray</a></li><li data-type='method'><a href="module-array.html#.randomizeArray">randomizeArray</a></li><li data-type='method'><a href="module-array.html#.uniqArr">uniqArr</a></li></ul></li><li><a href="module-boolean.html">boolean</a><ul class='methods'><li data-type='method'><a href="module-boolean.html#.convertToStrBool">convertToStrBool</a></li><li data-type='method'><a href="module-boolean.html#.isStrBool">isStrBool</a></li><li data-type='method'><a href="module-boolean.html#.softFalsy">softFalsy</a></li><li data-type='method'><a href="module-boolean.html#.toBool">toBool</a></li></ul></li><li><a href="module-collection.html">collection</a><ul class='methods'><li data-type='method'><a href="module-collection.html#.deepClone">deepClone</a></li><li data-type='method'><a href="module-collection.html#.get">get</a></li><li data-type='method'><a href="module-collection.html#.isColl">isColl</a></li><li data-type='method'><a href="module-collection.html#.isEmptyColl">isEmptyColl</a></li><li data-type='method'><a href="module-collection.html#.mapColl">mapColl</a></li><li data-type='method'><a href="module-collection.html#.reduceColl">reduceColl</a></li><li data-type='method'><a href="module-collection.html#.repeat">repeat</a></li><li data-type='method'><a href="module-collection.html#.set">set</a></li><li data-type='method'><a href="module-collection.html#.unset">unset</a></li><li data-type='method'><a href="module-collection.html#~cloneObjWithPrototypeAndProperties">cloneObjWithPrototypeAndProperties</a></li></ul></li><li><a href="module-functions.html">functions</a><ul class='methods'><li data-type='method'><a href="module-functions.html#.applyToFunc">applyToFunc</a></li><li data-type='method'><a href="module-functions.html#.checkCall">checkCall</a></li><li data-type='method'><a href="module-functions.html#.debounce">debounce</a></li><li data-type='method'><a href="module-functions.html#.doIt">doIt</a></li><li data-type='method'><a href="module-functions.html#.eitherFunc">eitherFunc</a></li><li data-type='method'><a href="module-functions.html#.isFunc">isFunc</a></li><li data-type='method'><a href="module-functions.html#.memorize">memorize</a></li><li data-type='method'><a href="module-functions.html#.throttle">throttle</a></li><li data-type='method'><a href="module-functions.html#.throttleLast">throttleLast</a></li><li data-type='method'><a href="module-functions.html#.uuid">uuid</a></li></ul></li><li><a href="module-Helpers.html">Helpers</a><ul class='methods'><li data-type='method'><a href="module-Helpers.html#.isEmpty">isEmpty</a></li><li data-type='method'><a href="module-Helpers.html#.isSame">isSame</a></li><li data-type='method'><a href="module-Helpers.html#.isValidDate">isValidDate</a></li><li data-type='method'><a href="module-Helpers.html#.strToType">strToType</a></li><li data-type='method'><a href="module-Helpers.html#.typeOf">typeOf</a></li></ul></li><li><a href="module-log.html">log</a><ul class='methods'><li data-type='method'><a href="module-log.html#.logData">logData</a></li><li data-type='method'><a href="module-log.html#.resetLogs">resetLogs</a></li><li data-type='method'><a href="module-log.html#.setLogs">setLogs</a></li></ul></li><li><a href="module-number.html">number</a><ul class='methods'><li data-type='method'><a href="module-number.html#.getNums">getNums</a></li><li data-type='method'><a href="module-number.html#.isFloat">isFloat</a></li><li data-type='method'><a href="module-number.html#.isInt">isInt</a></li><li data-type='method'><a href="module-number.html#.isNum">isNum</a></li><li data-type='method'><a href="module-number.html#.nth">nth</a></li><li data-type='method'><a href="module-number.html#.toFloat">toFloat</a></li><li data-type='method'><a href="module-number.html#.toInt">toInt</a></li><li data-type='method'><a href="module-number.html#.toNum">toNum</a></li></ul></li><li><a href="module-object.html">object</a><ul class='methods'><li data-type='method'><a href="module-object.html#.applyToCloneOf">applyToCloneOf</a></li><li data-type='method'><a href="module-object.html#.clearObj">clearObj</a></li><li data-type='method'><a href="module-object.html#.deepFreeze">deepFreeze</a></li><li data-type='method'><a href="module-object.html#.deepMerge">deepMerge</a></li><li data-type='method'><a href="module-object.html#.eitherObj">eitherObj</a></li><li data-type='method'><a href="module-object.html#.everyEntry">everyEntry</a></li><li data-type='method'><a href="module-object.html#.filterObj">filterObj</a></li><li data-type='method'><a href="module-object.html#.hasOwn">hasOwn</a></li><li data-type='method'><a href="module-object.html#.isObj">isObj</a></li><li data-type='method'><a href="module-object.html#.jsonEqual">jsonEqual</a></li><li data-type='method'><a href="module-object.html#.keyMap">keyMap</a></li><li data-type='method'><a href="module-object.html#.mapObj">mapObj</a></li><li data-type='method'><a href="module-object.html#.omitKeys">omitKeys</a></li><li data-type='method'><a href="module-object.html#.pickKeys">pickKeys</a></li><li data-type='method'><a href="module-object.html#.reduceObj">reduceObj</a></li><li data-type='method'><a href="module-object.html#.sanitizeCopy">sanitizeCopy</a></li><li data-type='method'><a href="module-object.html#.someEntry">someEntry</a></li><li data-type='method'><a href="module-object.html#.toObj">toObj</a></li><li data-type='method'><a href="module-object.html#.trimStringFields">trimStringFields</a></li></ul></li><li><a href="module-promise.html">promise</a><ul class='methods'><li data-type='method'><a href="module-promise.html#.promisifyAll">promisifyAll</a></li></ul></li><li><a href="module-string.html">string</a><ul class='methods'><li data-type='method'><a href="module-string.html#.buildPath">buildPath</a></li><li data-type='method'><a href="module-string.html#.camelCase">camelCase</a></li><li data-type='method'><a href="module-string.html#.capitalize">capitalize</a></li><li data-type='method'><a href="module-string.html#.cleanStr">cleanStr</a></li><li data-type='method'><a href="module-string.html#.containsStr">containsStr</a></li><li data-type='method'><a href="module-string.html#.eitherStr">eitherStr</a></li><li data-type='method'><a href="module-string.html#.isEmail">isEmail</a></li><li data-type='method'><a href="module-string.html#.isPhone">isPhone</a></li><li data-type='method'><a href="module-string.html#.isStr">isStr</a></li><li data-type='method'><a href="module-string.html#.isUrl">isUrl</a></li><li data-type='method'><a href="module-string.html#.isUuid">isUuid</a></li><li data-type='method'><a href="module-string.html#.parseJSON">parseJSON</a></li><li data-type='method'><a href="module-string.html#.plural">plural</a></li><li data-type='method'><a href="module-string.html#.removeDot">removeDot</a></li><li data-type='method'><a href="module-string.html#.sanitize">sanitize</a></li><li data-type='method'><a href="module-string.html#.singular">singular</a></li><li data-type='method'><a href="module-string.html#.styleCase">styleCase</a></li><li data-type='method'><a href="module-string.html#.toStr">toStr</a></li><li data-type='method'><a href="module-string.html#.trainCase">trainCase</a></li><li data-type='method'><a href="module-string.html#.wordCaps">wordCaps</a></li></ul></li><li><a href="module-url.html">url</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">object.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module object */

'use strict'

import { logData } from './log'
import { isFunc, pipeline } from './method'
import { deepClone } from './collection'
import { sanitize, isStr } from './string'
import { isArr } from './array'
import { strToType } from './ext'

/**
 * Clones an object by converting to JSON string and back.
 * @function
 * @param {Object} obj - object to clone
 * @returns {Object} copy of original object
 */
export const cloneJson = obj => {
  try {
    return JSON.parse(JSON.stringify(obj))
  }
  catch(e){
    logData(e.message, 'error')
    return null
  }
}

/**
 * Removes all properties from an object.
 * @function
 * @param {Object} obj - object to remove properties from
 * @param {Array} filter - list of keys to not remove
 * @returns { null }
 */
export const clearObj = (obj, filter) => {
  obj &amp;&amp; Object
    .entries(obj)
    .map(([key, value]) => {
      if(filter &amp;&amp; filter.indexOf(key) !== -1) return
      if(typeof value === 'object') clearObj(value)
      obj[key] = undefined
      delete obj[key]
    })
}

/**
 * Returns the first param if correct type of second param.
 * @function
 * @param {Object} obj1 - return if is object
 * @param {Object} obj2 - use if first is not an object
 * @returns {Object}
 */
export const eitherObj = (obj1, obj2) => (
  isObj(obj1) &amp;&amp; obj1 || obj2
)

/**
 * Recursively freezes and object.
 * @function
 * @param {Object} obj
 * @return {Object} - frozen Object
 */
export const deepFreeze = obj => {
  Object.freeze(obj)
  Object
    .getOwnPropertyNames(obj)
    .map(prop => {
      obj.hasOwnProperty(prop)
        &amp;&amp; obj[prop] !== null
        &amp;&amp; (typeof obj[prop] === 'object' || isFunc(obj[prop]))
        &amp;&amp; !Object.isFrozen(obj[prop])
        &amp;&amp; deepFreeze(obj[prop])
    })

  return obj
}

/**
 * Deep merges an array of objects together.
 * @function
 * @param {Array} sources - array of objects to join
 * @returns {Object|Array} - merged object or array
 */
export const deepMerge = (...sources) => {
  return sources.reduce(
    (merged, source) =>
      source instanceof Array
        ? // Check if it's array, and join the arrays
        [ ...((merged instanceof Array &amp;&amp; merged) || []), ...source ]
        : // Check if it's an object, and loop the properties
        source instanceof Object
          ? Object.entries(source)
            // Loop the entries of the object, and add them to the merged object
            .reduce(
              (joined, [ key, value ]) => ({
                ...joined,
                [key]:
                  // Check if the value is not a function and is an object
                  // Also check if key is in the object
                  // Set to value or deepMerge the object with the current merged object
                  (
                    !isFunc(value) &amp;&amp;
                    value instanceof Object &amp;&amp;
                    key in joined &amp;&amp;
                    // This will always return an object
                    // So if it gets called then value is not getting set
                    deepMerge(joined[key], value)
                  ) ||
                  // Otherwise just set the value
                  value
              }),
              // Pass in merged at the joined object
              merged
            )
          : // If it's not an array or object, just return the merge object
          merged,
    {}
  )
}

/**
 * Deep clones Object obj, then returns the result of calling function mutatorCb with the clone as its argument
 * @example
 * const obj = {}
 * const clone = applyToCloneOf(obj, (clone) => { clone.test = 'foo'; return clone })
 * console.log(obj === clone) // prints false
 * console.log(clone.test === 'foo') // prints true
 * @function
 * @param {Object} obj - object
 * @param {Function} mutatorCb - a callback that accepts one argument, the cloned obj, and mutates it in some way
 * @returns the mutated clone
 */
export const applyToCloneOf = (obj, mutatorCb) => {
  let error
  if (!obj) error = 'object (Argument 1) in applyToCloneOf, must be defined!'

  if (!isObj(obj)) error = 'object (Argument 1) in applyToCloneOf, must be an object!'

  if (!mutatorCb) error = 'mutator (Argument 2) in applyToCloneOf, must be defined!'

  if (!isFunc(mutatorCb)) error = 'mutator (Argument 2) arg in applyToCloneOf, must be a function!'
  
  if(error) return console.warn(error) || obj

  const clone = deepClone(obj)
  mutatorCb(clone)

  return clone
}

/**
 * Checks if prop exists on the object.
 * @function
 * @param {Object} obj - data to check
 * @param {string} prop - prop to check for
 * @returns {boolean} T/F if the prop exists
 */
export const hasOwn = (obj, prop) => (
  Object.prototype.hasOwnProperty.call(obj, prop)
)

/**
 * Checks if data is an object and not an array.
 * @function
 * @param {Object} obj - data to check
 * @returns {boolean}
 */
export const isObj = obj => typeof obj === 'object' &amp;&amp; !Array.isArray(obj) &amp;&amp; obj !== null

/**
 * Compares two objects by converting to JSON, and checking string equality.
 * @function
 * @param { object | array } one - object to compare with param two
 * @param { object | array } two - object to compare with param one
 * @return {boolean} status of equality
 */
export const jsonEqual = (one, two) => {
  try {
    return JSON.stringify(one) === JSON.stringify(two)
  }
  catch(e){
    return false
  }
}

/**
 * Map over and objects props and values.
 * @function
 * @param {Object} obj
 * @return {Array} -  returned values from callback
 */
export const mapObj = (obj, cb) => (
  (isObj(obj) &amp;&amp; isFunc(cb) &amp;&amp;
  Object
    .entries(obj)
    .map(([ key, value ]) => cb(key, value))
  ) || obj
)

/**
 * Creates a new object from passed in object with keys not defined from array.
 * @function
 * @param {Object} target - object to pull keys from
 * @param {Array} keys - keys to not add to new object
 * @return {Object} new object with only keys not in array
 */
export const omitKeys = (obj = {}, keys = []) => (
  isObj(obj) &amp;&amp; reduceObj(obj, (key, _, updated) => {
      keys.indexOf(key) === -1 &amp;&amp; (updated[key] = obj[key])

      return updated
    }, {}) || {}
)

/**
 * Creates a new object from passed in object with keys defined from array.
 * @function
 * @param {Object} target - object to pull keys from
 * @param {Array} keys - keys to add to new object
 * @return {Object} new object with only keys from passed in keys array
 */
export const pickKeys = (obj = {}, keys = []) => (
  isObj(obj) &amp;&amp; keys.reduce((updated, key) => {
    key in obj &amp;&amp; (updated[key] = obj[key])

    return updated
  }, {}) || {}
)

/**
 * Loop over and objects props and values and reduce to new object.
 * @function
 * @param {Object} obj
 * @return {Object} - updated object
 */
export const reduceObj = (obj, cb, start={}) => (
  (isObj(obj) &amp;&amp; isFunc(cb) &amp;&amp;
  Object
    .entries(obj)
    .reduce((data, [ key, value ]) => cb(key, value, data), start)
  ) || start
)

/**
 * Sanitizes all html strings in an object's properties.
 * @function
 * @param {Object} obj to be sanitize
 * @return {Object} - obj with strings sanitized
 */
export const sanitizeCopy = obj => JSON.parse(sanitize(JSON.stringify(obj)))


/**
 * Trims objects string fields.
 * @function
 * @param {Object} object
 * @return {Object} - object with string fields trimmed
 */
export const trimStringFields = object => (
  Object
    .entries(object)
    .reduce((cleaned, [ key, value ]) => {
      cleaned[key] = typeof value === 'string' ? value.trim() : value
      return cleaned
    }, object)
)

/**
 * Converts an array or string into an object.
 * @function
 * @param { array | string } val - to be converted to object
 * @param {string} divider - if string, what divides key from value
 * @param {string} split - if string, what splits each key/value pair
 * @return {Object} - converted object 
 */
export const toObj = (val, divider, split) => {
  if(isArr(val))
    return Object.keys(val)
      .reduce((obj, key) => {
        obj[key] = val[key]

        return obj
      }, {})

  if(!isStr(str)) return {}

  divider = divider || '='
  split = split || '&amp;'
  return str
    .split(split)
    .reduce((obj, item) => {
      const sep = item.split(divider)
      obj[sep[0].trim()] = strToType(sep[1].trim())

      return obj
    }, {})
}

/**
 * Converts an array of strings to a matching key/value pair object.
 * @function
 * @param {Array} arr - to be converted to object
 * @param {string} toUpperCase - converts the key and value to uppercase
 * @return {Object} built object
 */
export const keyMap = (arr, toUpperCase) => (
  isArr(arr) &amp;&amp; arr.reduce((obj, key) => {
    if(!isStr(key)) return obj
    
    const use = toUpperCase &amp;&amp; key.toUpperCase() || key
    obj[use] = use

    return obj
  }, {}) || {}
)

/**
 * Like "every" for arrays, but operates across each entry in obj
 * @function
 * @param {Object} obj 
 * @param {Function} predicate of form (key, value) => boolean. Returns true or false for the entry
 * @returns boolean indicating that every entry satisfied the predicate or not
 */
export const everyEntry = (obj, predicate) => {
  if (!obj) {
    console.error(`everyEntry expects argument obj [${obj}] to be defined.`)
    return false
  }

  if (!isObj(obj)) {
    console.error(`Argument obj ${obj} must be an object.`)
    return false
  }

  if (!isFunc(predicate)) {
    console.error(`Argument 'predicate' passed into everyEntry must a function. Found: ${predicate}`)
    return false
  }

  return pipeline(
    obj,
    Object.entries,
    entries => entries.every(([key, value]) => predicate(key, value))
  )
}
/**
 * Like "some" for arrays, but operates across each entry in obj
 * @function
 * @param {Object} obj 
 * @param {Function} predicate of form (key, value) => boolean. Returns true or false for the entry
 * @returns boolean indicating that at least one entry satisfied the predicate or not
 */
export const someEntry = (obj, predicate) => {
  if (!obj) {
    console.error(`someEntry expects argument obj [${obj}] to be defined.`)
    return false
  }

  if (!isObj(obj)) {
    console.error(`Argument obj ${obj} must be an object.`)
    return false
  }

  if (!isFunc(predicate)) {
    console.error(`Argument 'predicate' passed into someEntry must a function. Found: ${predicate}`)
    return false
  }

  return pipeline(
    obj,
    Object.entries,
    entries => entries.some(([key, value]) => predicate(key, value))
  )
}

/**
 * Returns a new object, consisting of every key-value pair from obj that, when passed into the predicate, returned true
 * @function
 * @param {*} obj - regular object
 * @param {*} predicate  - function of form: (key, value) => Boolean
 * @returns object consisting of a subset of the entries from obj
 * @example: filterObj({a: 2, b: 3}, (k, v) => (v > 2)) returns: {b: 3}
 */
export const filterObj = (obj, predicate) => {
  if (!obj) return obj

  if (!isObj(obj)) {
    console.error(`Object ${obj} was not an object. It must be for filterObject`)
    return obj
  }

  if (!isFunc(predicate)) {
    console.error(`Argument 'predicate' passed into filterObject must a function. Found: ${predicate}`)
    return obj
  } 

  return pipeline(
    obj,
    Object.entries,
    entries => entries.filter(([key, value]) => predicate(key, value)),
    Object.fromEntries
  )
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Sun Oct 13 2019 18:27:46 GMT-0700 (Mountain Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>

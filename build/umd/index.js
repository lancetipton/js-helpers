!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).jsutils={})}(this,(function(e){"use strict";const t=e=>Array.isArray(e),r=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,n=e=>"function"==typeof e,o={SHOULD_LOG:!0,SHOULD_THROW:!1,LOG_PREFIX:null},s=(e,t={},{logs:r=o.SHOULD_LOG,throws:n=o.SHOULD_THROW,prefix:s=o.LOG_PREFIX}={})=>{const u=Object.entries(e),a=()=>!0,l=u.map(([e,r])=>i(e,r,t[e]||t.$default||a)),{success:f,cases:p}=l.reduce((e,t)=>c(e,t,{logs:r,throws:n,prefix:s}),{success:!0,cases:{}});return[f,p]};s.setOptions=({logs:e,throws:t,prefix:r})=>{void 0!==e&&(o.SHOULD_LOG=e),void 0!==t&&(o.SHOULD_THROW=t),void 0!==r&&(o.LOG_PREFIX=r)},s.resetOptions=()=>{o.SHOULD_LOG=!0,o.SHOULD_THROW=!1,o.LOG_PREFIX=null};const i=(e,t,r)=>{const n=r(t),o=!r.name||r.name===e||"$default"===r.name?r.toString():r.name;return{success:n,key:e,value:t,validator:r,reason:n?null:[`Argument "${e}" with value `,t,` failed validator: ${o}.`]}},c=(e,t,{logs:r,throws:n,prefix:o})=>(!t.success&&u(t,r,n,o),{success:e.success&&t.success,cases:{...e.cases,[t.key]:t}}),u=(e,t,r,n)=>{const o=n?[n,...e.reason]:e.reason;if(r)throw new Error(o.join());t&&console.error(...o)},a=e=>"number"==typeof e&&e!=e,l=e=>"number"==typeof e&&!a(e),f=e=>l(e)&&e>=0,p=e=>"boolean"==typeof e,d=e=>"false"===e||"true"===e,m=e=>"string"==typeof e,y=e=>null==e?"":m(e)?e:JSON.stringify(e),g=e=>p(e)?y(e):e&&"false"!==e&&"0"!==e?"true":"false",O=e=>Boolean(e||""===e||0===e),b=e=>d(e)?"true"===e:"true"===g(e),h=e=>"object"==typeof e&&null!==e,j=(e,t=!0)=>h(e)?Object.keys(e).reduce((r,n)=>{const o=e[n];return null==o||(r[n]=t&&h(o)?j(o):o),r},r(e)&&{}||[]):console.error("cleanColl requires a collection as the first argument")||e,w=(e,r,o,s)=>{const i=e;if(!h(e)||!e||!r)return"set"!==o&&s||void 0;const c=t(r)?Array.from(r):r.split("."),u=c.pop();let a,l;for(;a=c.shift();){const t=e[a];if(h(t)||n(t)||("set"===o?e[a]={}:l=!0),e=t,l)return s}return"get"===o?u in e?e[u]:s:"unset"===o?delete e[u]:(e[u]=s)&&i||i},S=(e,t,r)=>w(e,t,"get",r),_=(e,t,r)=>w(e,t,"set",r),A=Array.isArray,C=Object.keys,F=Object.prototype.hasOwnProperty,$=(e,t)=>{if(e===t)return!0;if(!e||!t||"object"!=typeof e||"object"!=typeof t)return e!=e&&t!=t;const r=A(e),n=A(t);let o,s,i;if(r&&n){if(s=e.length,s!=t.length)return!1;for(o=s;0!=o--;)if(!$(e[o],t[o]))return!1;return!0}if(r!=n)return!1;const c=e instanceof Date,u=t instanceof Date;if(c!=u)return!1;if(c&&u)return e.getTime()==t.getTime();const a=e instanceof RegExp,l=t instanceof RegExp;if(a!=l)return!1;if(a&&l)return e.toString()==t.toString();const f=C(e);if(s=f.length,s!==C(t).length)return!1;for(o=s;0!=o--;)if(!F.call(t,f[o]))return!1;for(o=s;0!=o--;)if(i=f[o],!$(e[i],t[i]))return!1;return!0},E=e=>{const t=function(...r){return e instanceof t||S(e.prototype,"constructor.name")?new e(...r):e.apply(e,r)};for(let r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return Object.defineProperty(t,"name",{value:e.name,configurable:!0}),t.toString=()=>e.toString(),t},v=(e,r=new WeakMap)=>{if(Object(e)!==e)return e;if(e instanceof Set)return new Set(e);if(r.has(e))return r.get(e);if(t(e))return e.map(e=>v(e));if(n(e))return E(e);const o=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e.constructor?null:Object.create(null);return null===o?x(e):(r.set(e,o),e instanceof Map?Array.from(e,([e,t])=>o.set(e,v(t,r))):Object.assign(o,...Object.keys(e).map(t=>({[t]:v(e[t],r)}))))},x=e=>{if(!e)return e;const t=Object.getPrototypeOf(e),r=Object.getOwnPropertyDescriptors(e);for(const[e,t]of Object.entries(r))t.value&&(r[e].value=v(t.value));const n=Object.create(t,r);return Object.isFrozen(e)&&Object.freeze(n),Object.isSealed(e)&&Object.seal(n),n},P=e=>y(e).replace(/([^.\d])/gm,""),I=e=>l(e)?e:e&&!a(e)&&Number(P(e))||0,L=e=>e&&m(e)?d(e)?b(e):l(e)?I(e):(()=>{try{return JSON.parse(e)}catch(t){return e}})():e,T=e=>Object.prototype.toString.call(e).slice(8,-1);let N,U="dir",R="type";const k=["error","info","log","dir","warn"],D=(...e)=>{if(!e.length)return;let t=1===e.length?U:e.pop();(N||"error"===t)&&("string"==typeof e[0]&&("type"===R?e[0]=`[ ${t.toUpperCase()} ] ${e[0]}`:R&&(e[0]=`${R} ${e[0]}`)),-1!==k.indexOf(t)?console[t](...e):console[U](...e,t))},z=(e,r)=>{if(t(r)){const[t,...n]=r;return t(e,...n)}return n(r)?r(e):(console.error("Pipeline expected either a function or an array (for function expressions). Found "+typeof r),e)},H=(e,...t)=>t.reduce((e,t)=>z(e,t),e),J=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),M=e=>e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,M),B=(e,...r)=>{if(!r.length)return null;for(let o of r){if(!t(o)){console.error("Matching case must be an entry (a 2-element array). Found: "+T(o),o);break}const[r,s]=o;if(n(r)&&r(e))return s;if(r===e)return s}return null};B.default=()=>!0;const G=e=>t(e)&&2===e.length&&(l(e[0])||m(e[0])),q=(e,o)=>{if(!t(e)&&!r(e))return console.error(e,"Expected array or object for obj. Found "+typeof e),e;if(!n(o))return console.error("Expected function for cb. Found "+typeof o),e;const s=Object.entries(e),i=t(e)?[]:{};return s.reduce((e,[t,r])=>{const n=o(t,r);return G(n)?_(e,n[0],n[1]):(console.error(`Callback function must return entry. Found: ${n}. Using current entry instead.`),_(e,t,r))},i)},W=(e,t)=>{e&&Object.entries(e).map(([r,n])=>{t&&-1!==t.indexOf(r)||("object"==typeof n&&W(n),e[r]=void 0,delete e[r])})},X=e=>(Object.freeze(e),Object.getOwnPropertyNames(e).map(t=>{e.hasOwnProperty(t)&&null!==e[t]&&("object"==typeof e[t]||n(e[t]))&&!Object.isFrozen(e[t])&&X(e[t])}),e),K=(...e)=>e.reduce((e,o)=>{const s=v(o);return t(s)?[...t(e)&&e||[],...s]:r(s)?Object.entries(s).reduce((e,[t,r])=>({...e,[t]:n(r)?E(r):h(r)&&t in e?K(e[t],r):v(r)}),e):e},t(e[0])&&[]||{}),V=(e,t,o={})=>r(e)&&n(t)&&Object.entries(e).reduce((e,[r,n])=>t(r,n,e),o)||o,Q=e=>m(e)&&e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")||e,Z=e=>{if(!n(e))throw"Argument must be a function";return(...t)=>new Promise((r,o)=>n(t[t.length-1])?(t.pop(),t.push((...e)=>e&&e[0]?o(...e):r(...e)),e(...t)):r(e(...t)))},Y=Array.from(["caller","callee","arguments","apply","bind","call","toString","__proto__","__defineGetter__","__defineSetter__","hasOwnProperty","__lookupGetter__","__lookupSetter__","isPrototypeOf","propertyIsEnumerable","valueOf","toLocaleString"]).concat(Object.getOwnPropertyNames(Object.prototype)).reduce((e,t)=>(e[t]=!0,e),{}),ee=e=>{if(!e.__IS_PROMISIFIED__){for(const t of Object.getOwnPropertyNames(e)){if(!(-1!==t.indexOf("Async")||e[t+"Async"])&&!Y[t])if(n(e[t]))e[t+"Async"]=Z(e[t]);else{const r=Object.getOwnPropertyDescriptor(e,t).get;n(r)&&(e[t+"Async"]=Z(r))}}e.__IS_PROMISIFIED__=!0}return e},te=(e,t)=>{if(!m(e))return e;if(!n(t))return e;let r="";for(const n of e)r+=t(n);return r},re=e=>e===e.toLowerCase(),ne=e=>e===e.toUpperCase(),oe=(e,t,r=["-","_"," "])=>{if(!m(e))return e;const n=e=>r.some(t=>t===e);let o="_";return te(e,e=>n(e)?(o=t,t):ne(e)&&re(o)&&!n(o)?(o=e,t+e):(o=e,e))},se=e=>m(e)&&e[0]&&`${e[0].toUpperCase()}${e.slice(1).toLowerCase()}`||e,ie=e=>{const t=0===e.indexOf(".")?e.slice(1):e;return t.indexOf(".")===t.length-1?t.slice(0,-1):t},ce=e=>e&&ie(e).replace(/[-_]/gm," ")||e,ue=(e,t)=>e&&ce(e).split(/[\s_-]/gm).reduce((e,r,n)=>r?e+=(n>0||t)&&se(r)||r.toLowerCase():e,"")||e,ae=(e,t,r="")=>{t=h(t)&&t||{};const o=ae.regex||/\${([^{]+[^}])}/g;return m(e)?e.replace(o,(e,o)=>{const s=(o||e.substr(2,e.length-3)).trim(),i=S(t,s,r);return n(i)?i(t,s,r):i}):console.error("template requires a string as the first argument")||e};e.applyToCloneOf=(e,t)=>{let o;if(e||(o="object (Argument 1) in applyToCloneOf, must be defined!"),r(e)||(o="object (Argument 1) in applyToCloneOf, must be an object!"),t||(o="mutator (Argument 2) in applyToCloneOf, must be defined!"),n(t)||(o="mutator (Argument 2) arg in applyToCloneOf, must be a function!"),o)return console.warn(o)||e;const s=v(e);return t(s),s},e.applyToFunc=z,e.buildPath=(...e)=>e.reduce((e,t)=>{let r=toStr(t);return`${e}${r&&"/"+r||""}`},"").replace(/([^:\/]|^)\/{2,}/g,"$1/"),e.camelCase=ue,e.capitalize=se,e.checkCall=(e,...t)=>n(e)&&e(...t)||void 0,e.cleanColl=j,e.cleanStr=ce,e.clearObj=W,e.cloneArr=e=>Array.from([...t(e)&&e||r(e)&&Object.entries(e)||[]]),e.cloneFunc=E,e.cloneJson=e=>{try{return JSON.parse(JSON.stringify(e))}catch(e){return D(e.message,"error"),null}},e.cloneObjWithPrototypeAndProperties=x,e.containsStr=(e,t,r)=>(e=!m(e)&&y(e)||e,t=!m(t)&&y(t)||t,-1!==e.indexOf(t,r)),e.convertToStrBool=g,e.debounce=(e,t=250,r=!1)=>{let o;return function(...s){if(!n(e))return null;const i=this,c=r&&!o;return clearTimeout(o),o=setTimeout(()=>{o=null,!r&&e.apply(i,s)},t),c?n(e)&&e.apply(i,s):void 0}},e.deepClone=v,e.deepEqual=$,e.deepFreeze=X,e.deepMerge=K,e.delimitString=oe,e.doIt=(...e)=>{const t=e.slice(),r=t.shift(),o=t.shift(),s=t.pop();if(!l(r)||!n(s))return[];const i=new Array(r),c=[];for(let e=0;e<i.length;e++){const r=s.call(o,e,...t);if(!1===r)break;c.push(r)}return c},e.either=(e,t,r)=>n(r)?r(e,t)&&e||t:O(e)&&e||t,e.eitherArr=(e,r)=>t(e)?e:r,e.eitherFunc=(e,t)=>n(e)&&e||t,e.eitherObj=(e,t)=>r(e)&&e||t,e.eitherStr=(e,t)=>m(e)&&e||t,e.equalsNaN=a,e.everyEntry=(e,t)=>e?r(e)?n(t)?H(e,Object.entries,e=>e.every(([e,r])=>t(e,r))):(console.error("Argument 'predicate' passed into everyEntry must a function. Found: "+t),!1):(console.error(`Argument obj ${e} must be an object.`),!1):(console.error(`everyEntry expects argument obj [${e}] to be defined.`),!1),e.exists=e=>e==e&&null!=e,e.filterObj=(e,t)=>e?r(e)?n(t)?V(e,(e,r,n)=>(t(e,r)&&(n[e]=r),n),{}):(console.error("Argument 'predicate' passed into filterObject must a function. Found: "+t),e):(console.error(`Object ${e} was not an object. It must be for filterObject`),e):e,e.flatMap=(e,r)=>{const[o]=s({arr:e,mapFn:r},{arr:t,mapFn:n});return o?e.reduce((e,n)=>{const o=r(n);return t(o)?o.map(t=>e.push(t)):e.push(o),e},[]):e},e.get=S,e.getNums=P,e.hasOwn=J,e.isArr=t,e.isBool=p,e.isColl=h,e.isEmail=e=>{if(!e||!m(e))return!1;return Boolean(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e))},e.isEmpty=e=>r(e)?0===Object.keys(e).length:t(e)?0===e.length:m(e)?0===e.trim().length:!!l(e)&&e<1,e.isEmptyColl=e=>t(e)?0===e.length:h(e)&&0===Object.getOwnPropertyNames(e).length,e.isEntry=G,e.isFloat=e=>l(e)&&e%1!=0,e.isFunc=n,e.isInt=e=>l(e)&&e%1==0,e.isLowerCase=re,e.isNonNegative=f,e.isNum=l,e.isObj=r,e.isPhone=e=>{if(!e||!m(e))return!1;return Boolean(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(e))&&e.replace(/\D/g,"").length<11},e.isSame=(e,t)=>e===t?0!==e||1/e==1/t:e!=e&&t!=t,e.isStr=m,e.isStrBool=d,e.isUpperCase=ne,e.isUrl=e=>Boolean(/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e)),e.isUuid=e=>{if(!e||!m(e))return!1;return Boolean(/^[0-9A-F]{8}-[0-9A-F]{4}-[4][0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e))},e.isValidDate=e=>!isNaN((e instanceof Date&&e||new Date(e)).getTime()),e.isValidUrl=e=>/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-/]))?/.test(e),e.jsonEqual=(e,t)=>{try{return JSON.stringify(e)===JSON.stringify(t)}catch(e){return!1}},e.keyMap=(e,r)=>t(e)&&e.reduce((e,t)=>{if(!m(t))return e;const n=r&&t.toUpperCase()||t;return e[n]=n,e},{})||{},e.limbo=e=>e&&n(e.then)?e.then(e=>[null,e]).catch(e=>[e,void 0]):[new Error("A promise or thenable is required as the first argument!"),null],e.logData=D,e.mapColl=(e,r)=>n(r)&&h(e)?Object.keys(e).map(t=>r(t,e[t],e)):t(e)?[]:{},e.mapEntries=q,e.mapKeys=(e,t)=>r(e)&&n(t)?q(e,(e,r)=>[t(e),r]):e,e.mapObj=(e,t)=>r(e)&&n(t)&&Object.entries(e).map(([e,r])=>t(e,r))||e,e.mapString=te,e.match=B,e.memorize=(e,t,r=1)=>{if(!n(e)||t&&!n(t))return console.error("Error: Expected a function",e,t);let o=function(){const n=o.cache,s=t?t.apply(this,arguments):arguments[0];if(J(n,s))return n[s];const i=e.apply(this,arguments);return l(r)&&Object.keys(n).length<r?n[s]=i:o.cache={[s]:i},i};return o.cache={},o.destroy=()=>{t=void 0,o.cache=void 0,o.destroy=void 0,o=void 0},o},e.nth=e=>{if(!l(e)){if(!(e=P(e)))return"";if(e=I(e),a(e))return""}const t=e%100;if(t>=10&&t<=20)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},e.objToQuery=e=>{let r;return V(e,(e,n,o)=>{if(!n)return o;const s=m(n)||l(n)||p(n)?n:h(n)?t(n)?n.join(","):JSON.stringify(n):null;return s?(o=r?`${o}&${encodeURIComponent(e)}=${encodeURIComponent(s)}`:`?${encodeURIComponent(e)}=${encodeURIComponent(s)}`,r=!0,o):o},"")},e.omitKeys=(e={},t=[])=>r(e)&&V(e,(r,n,o)=>(-1===t.indexOf(r)&&(o[r]=e[r]),o),{})||{},e.omitRange=(e,r,n)=>{const[o]=s({arr:e,startIndex:r,count:n},{arr:t,$default:f});if(!o)return e;const i=[...e];return i.splice(r,n),i},e.parseJSON=e=>{try{return JSON.parse(e)}catch(e){return console.error(e.message),null}},e.pickKeys=(e={},t=[])=>r(e)&&t.reduce((t,r)=>(r in e&&(t[r]=e[r]),t),{})||{},e.pipeline=H,e.plural=e=>e&&e.length&&"s"!==e[e.length-1]?e+"s":e,e.promisify=Z,e.promisifyAll=e=>{if(!r(e))return e;ee(e);const t=Object.getPrototypeOf(e);return t&&null!==Object.getPrototypeOf(t)&&ee(t),e},e.queryToObj=e=>{const r={},n=e.split("?"),o=n[n.length-1];if(!o)return r;const s=o.split("&");return s.length&&s.map(e=>{const n=e.split("=");if(n.length<=1)return r;const o=[n.shift(),n.join("=")];if(2===o.length){const e=decodeURIComponent(o[1]).split(",");if(e&&e.length>1)r[o[0]]=e;else if(o[0]in r){const e=r[o[0]];r[o[0]]=t(e)?e.push(decodeURIComponent(o[1])):[e,decodeURIComponent(o[1])]}else r[o[0]]=decodeURIComponent(o[1])}}),r},e.randomArr=(e,r)=>{if(!t(e))return e;const n=r||1,o=[];for(let t=0;t<n;t++)o.push(e[Math.floor(Math.random()*e.length)]);return r?o:o[0]},e.randomizeArr=e=>!t(e)&&e||e.sort(()=>.5-Math.random()),e.reduceColl=(e,r,o)=>n(r)&&h(e)?Object.keys(e).reduce((t,n)=>r(n,e[n],e,t),o):t(e)?[]:{},e.reduceObj=V,e.removeDot=ie,e.repeat=(e,t,r=!1)=>{if(!t||t<=0)return[];if(!l(t))return console.error("Times argument must be a number"),[];const o=[];for(let s=0;s<t;s++){const t=n(e)?e():r?v(e):e;o.push(t)}return o},e.resetLogs=()=>{N=void 0,U="log",R="type"},e.sanitize=Q,e.sanitizeCopy=e=>JSON.parse(Q(JSON.stringify(e))),e.set=_,e.setLogs=(e,t,r)=>{N=e,U=t||U||"log",R=r||R||"type"},e.shallowEqual=(e,r,n)=>{if(n&&(t(n)||m(n))&&(e=S(e,n),r=S(r,n)),e===r)return!0;if(!(e&&h(e)&&r&&h(r)))return!1;if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const t in e)if(e[t]!==r[t])return!1;return!0},e.singular=e=>e&&e.length&&"s"===e[e.length-1]?e.slice(0,e.length-1):e,e.snakeCase=e=>oe(e,"_").toLowerCase(),e.softFalsy=O,e.someEntry=(e,t)=>e?r(e)?n(t)?H(e,Object.entries,e=>e.some(([e,r])=>t(e,r))):(console.error("Argument 'predicate' passed into someEntry must a function. Found: "+t),!1):(console.error(`Argument obj ${e} must be an object.`),!1):(console.error(`someEntry expects argument obj [${e}] to be defined.`),!1),e.strToType=L,e.styleCase=e=>{if(!m(e))return e;const t=ue(e);return`${t[0].toLowerCase()}${t.slice(1)}`},e.template=ae,e.throttle=(e,t=100)=>{let r=!1;return function(...n){if(!r)return r=!0,e.apply(this,n),setTimeout(()=>{r=!1},t)}},e.throttleLast=(e,t,r=100)=>{let n;return function(...o){n&&clearTimeout(n),n=setTimeout(()=>{e.apply(this,o),clearTimeout(n)},r),"function"==typeof t&&t()}},e.toBool=b,e.toFloat=e=>e&&!a(e)&&parseFloat(l(e)&&e||P(e))||0,e.toInt=e=>e&&!a(e)&&parseInt(l(e)&&e||P(e))||0,e.toNum=I,e.toObj=(e,r,n)=>t(e)?Object.keys(e).reduce((t,r)=>(t[r]=e[r],t),{}):m(str)?(r=r||"=",n=n||"&",str.split(n).reduce((e,t)=>{const n=t.split(r);return e[n[0].trim()]=L(n[1].trim()),e},{})):{},e.toStr=y,e.trainCase=e=>m(e)&&e.split(/(?=[A-Z])|[\s_-]/gm).join("-").toLowerCase()||e,e.trimStringFields=e=>Object.entries(e).reduce((e,[t,r])=>(e[t]=m(r)?r.trim():r,e),e),e.typeOf=T,e.uniqArr=e=>!t(e)&&e||e.filter((e,t,r)=>r.indexOf(e)==t),e.unset=(e,t)=>w(e,t,"unset"),e.uuid=M,e.validate=s,e.wait=e=>new Promise((t,r)=>setTimeout(()=>t(!0),e)),e.wordCaps=e=>{if(!m(e))return e;return ce(e).split(" ").map(e=>e&&se(e)||"").join(" ")}}));
